# ==============================================
# Mondplan Speech - Pairing Server Configuration
# ==============================================
# Copy this file to .env and modify values as needed

# ==============================================
# ENVIRONMENT CONFIGURATION
# ==============================================
# Determines server behavior and defaults
# Options: development, production, test
APP_ENV=development

# ==============================================
# SERVER SETTINGS
# ==============================================
# Server host and port configuration
HOST=0.0.0.0
PORT=3001

# Development port override
# In development mode, defaults to 8089 if PORT is 3001
# Production: Uses PORT value
# Development: Uses 8089 as default

# ==============================================
# JWT AUTHENTICATION
# ==============================================
# JWT configuration for WebSocket authentication
JWT_SECRET=test-secret-key-for-local-testing
JWT_ALGORITHM=HS256
JWT_EXPIRY_HOURS=1

# SECURITY WARNING: Change JWT_SECRET in production!
# Generate with: openssl rand -hex 32

# ==============================================
# CORS CONFIGURATION
# ==============================================
# Allowed origins for CORS (comma-separated)
# Environment-specific defaults apply if not set
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:8085,http://localhost:8086,http://localhost:8087,http://localhost:8088,null

# Automatic environment-specific origins:
# Development: Uses ALLOWED_ORIGINS above
# Production: https://mondplan.com,https://www.mondplan.com,https://app.mondplan.com
# Test: http://localhost:5173,http://localhost:8089

# ==============================================
# RATE LIMITING
# ==============================================
# Rate limiting configuration
RATE_LIMIT_ENABLED=true
MAX_REQUESTS_PER_MINUTE=30
MAX_CONNECTIONS_PER_IP=50
MAX_MESSAGES_PER_SECOND=10.0
MAX_PAIRING_ATTEMPTS=5
PAIRING_WINDOW_SECONDS=60

# ==============================================
# STORAGE CONFIGURATION
# ==============================================
# Storage backend selection
USE_REDIS=false

# Redis configuration (used when USE_REDIS=true)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0

# Environment-specific storage:
# Development: Uses USE_REDIS setting
# Production: Always uses Redis (overrides USE_REDIS)
# Test: Uses USE_REDIS setting

# ==============================================
# WEBSOCKET LIMITS
# ==============================================
# WebSocket message size limits (bytes)
WS_MESSAGE_SIZE_LIMIT=10240        # 10KB for text messages
WS_AUDIO_CHUNK_LIMIT=1048576       # 1MB for audio chunks
WS_AUDIO_FILE_LIMIT=104857600      # 100MB for audio files

# ==============================================
# LOGGING
# ==============================================
# Logging level
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# ==============================================
# USAGE EXAMPLES
# ==============================================

# Development Setup:
# APP_ENV=development
# PORT=8089 (or leave as 3001 for auto-override)
# USE_REDIS=false
# LOG_LEVEL=DEBUG

# Production Setup:
# APP_ENV=production
# PORT=3001
# JWT_SECRET=your-production-secret-key
# USE_REDIS=true (automatically enforced)
# LOG_LEVEL=INFO

# Test Setup:
# APP_ENV=test
# PORT=8089
# USE_REDIS=false
# LOG_LEVEL=DEBUG

# ==============================================
# RUNNING THE SERVER
# ==============================================
# Single entry point for all environments:
# python -m app.main

# Or with environment variables:
# APP_ENV=development python -m app.main
# APP_ENV=production python -m app.main

# ==============================================
# IMPORTANT NOTES
# ==============================================
# 1. All settings have sensible defaults
# 2. Environment-specific behavior is automatic
# 3. Production mode enforces Redis usage
# 4. Development mode enables auto-reload
# 5. CORS origins are environment-specific
# 6. Never commit .env file to git!